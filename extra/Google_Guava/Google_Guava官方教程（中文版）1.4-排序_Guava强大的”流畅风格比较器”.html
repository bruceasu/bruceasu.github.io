<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://bruceasu.github.io/rss.xml"
      title="RSS feed for https://bruceasu.github.io/"/>
<title>Google_Guava官方教程（中文版）1.4_排序_Guava强大的”流畅风格比较器”</title>
<meta name="author" content="Bruce">
<meta name="referrer" content="no-referrer">
<link href= "/styles/org-manual.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="static/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="/styles/font.css">
<link rel="stylesheet" media="screen and (min-width: 600px)" href="/styles/post.css">
<link rel="stylesheet" media="screen and (max-width: 600px)" href="/styles/post_mobile.css">
<link rel="stylesheet" media="screen and (min-width: 600px)" href="/styles/navigatebar.css">
<link rel="stylesheet" media="screen and (max-width: 600px)" href="/styles/navigatebar_mobile.css">
<link rel="stylesheet" href="/theme/highlight.css">

</head>
<body>
<div class="navigatebar">
    <div class="navigatebar-button navigatebar-mine">
        <a href="/index.html">Free World</a>
    </div>
    <div class="navigatebar-slogan">
        「生活可以更简单, 欢迎来到我的开源世界」
    </div>
    <div class="navigatebar-button">
        <a href="/index.html">Home</a>
    </div>
    <div class="navigatebar-button">
        <a href="/tags.html">Tags</a>
    </div>
    <div class="navigatebar-button">
        <a href="/rss.xml">Feeds</a>
    </div>
    <div class="navigatebar-button navigatebar-about">
        <a href="/about.html">About</a>
    </div>
</div>

      <div class="content-area">
<div class="title">Google_Guava官方教程（中文版）1.4_排序_Guava强大的”流畅风格比较器”</div>
<div class="category-area"><a href="https://bruceasu.github.io/tags.html#reprint"><div class="category">reprint</div></a> </div>
<div class="char-counter">2010-10-01</div>
        <div id="content">
<p>
排序: Guava强大的”流畅风格比较器”
</p>

<p>
排序器[Ordering]是Guava流畅风格比较器[Comparator]的实现，它可以用来为构建复杂的
比较器，以完成集合排序的功能。从实现上说，Ordering实例就是一个特殊的Comparator实
例。Ordering把很多基于Comparator的静态方法（如Collections.max）包装为自己的实例
方法（非静态方法），并且提供了链式调用方法，来定制和增强现有的比较器。
</p>

<p>
创建排序器：常见的排序器可以由下面的静态方法创建
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法</th>
<th scope="col" class="org-left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">natural()</td>
<td class="org-left">对可排序类型做自然排序，如数字按大小，日期按先后排序</td>
</tr>

<tr>
<td class="org-left">usingToString()</td>
<td class="org-left">按对象的字符串形式做字典排序[lexicographical ordering]</td>
</tr>

<tr>
<td class="org-left">from(Comparator)</td>
<td class="org-left">把给定的Comparator转化为排序器</td>
</tr>
</tbody>
</table>

<p>
实现自定义的排序器时，除了用上面的from方法，也可以跳过实现Comparator，而直接继承
Ordering：
</p>
<pre class="example">
Ordering&lt;String&gt; byLengthOrdering = new Ordering&lt;String&gt;() {

  public int compare(String left, String right) {

    return Ints.compare(left.length(), right.length());

  }

};

</pre>

<p>
链式调用方法：通过链式调用，可以由给定的排序器衍生出其它排序器
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">方法</td>
<td class="org-left">描述</td>
</tr>

<tr>
<td class="org-left">reverse()</td>
<td class="org-left">获取语义相反的排序器</td>
</tr>

<tr>
<td class="org-left">nullsFirst()</td>
<td class="org-left">使用当前排序器，但额外把null值排到最前面。</td>
</tr>

<tr>
<td class="org-left">nullsLast()</td>
<td class="org-left">使用当前排序器，但额外把null值排到最后面。</td>
</tr>

<tr>
<td class="org-left">compound(Comparator)</td>
<td class="org-left">合成另一个比较器，以处理当前排序器中的相等情况。</td>
</tr>

<tr>
<td class="org-left">lexicographical()</td>
<td class="org-left">基于处理类型T的排序器，返回该类型的可迭代对象Iterable&lt;T&gt;的排序器。</td>
</tr>

<tr>
<td class="org-left">onResultOf(Function)</td>
<td class="org-left">对集合中元素调用Function，再按返回值用当前排序器排序。</td>
</tr>
</tbody>
</table>

<p>
例如，你需要下面这个类的排序器。
</p>
<pre class="example">
class Foo {

    @Nullable String sortedBy;

    int notSortedBy;

}

</pre>

<p>
考虑到排序器应该能处理sortedBy为null的情况，我们可以使用下面的链式调用来合成排序
器：
</p>
<pre class="example">
Ordering&lt;Foo&gt; ordering = Ordering.natural().nullsFirst().onResultOf(new Function&lt;Foo, String&gt;() {

  public String apply(Foo foo) {

    return foo.sortedBy;

  }

});

</pre>

<p>
当阅读链式调用产生的排序器时，应该从后往前读。上面的例子中，排序器首先调用apply
方法获取sortedBy值，并把sortedBy为 null的元素都放到最前面，然后把剩下的元素按
sortedBy进行自然排序。之所以要从后往前读，是因为每次链式调用都是用后面的方法包装
了前面的排 序器。注：用compound方法包装排序器时，就不应遵循从后往前读的原则。为
了避免理解上的混乱，请不要把compound写在一长串链式调用的中间，你可以另起一行，在
链中最先或最后调用compound。超过一定长度的链式调用，也可能会带来阅读和理解上的难
度。我们建议按下面的代码这样，在一个链中最多使用三个方法。此外，你也可以把
Function分离成中间对象，让链式调用更简洁紧凑。
</p>

<pre class="example">
Ordering&lt;Foo&gt; ordering = Ordering.natural().nullsFirst().onResultOf(sortKeyFunction)

</pre>
<p>
运用排序器：Guava的排序器实现有若干操纵集合或元素值的方法
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法</th>
<th scope="col" class="org-left">描述</th>
<th scope="col" class="org-left">另请参见</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">greatestOf(Iterable iterable, int k)</td>
<td class="org-left">获取可迭代对象中最大的k个元素。</td>
<td class="org-left">leastOf</td>
</tr>

<tr>
<td class="org-left">isOrdered(Iterable)</td>
<td class="org-left">判断可迭代对象是否已按排序器排序：允许有排序值相等的元素。</td>
<td class="org-left">isStrictlyOrdered</td>
</tr>

<tr>
<td class="org-left">sortedCopy(Iterable)</td>
<td class="org-left">判断可迭代对象是否已严格按排序器排序：不允许排序值相等的元素。</td>
<td class="org-left">immutableSortedCopy</td>
</tr>

<tr>
<td class="org-left">min(E, E)</td>
<td class="org-left">返回两个参数中最小的那个。如果相等，则返回第一个参数。</td>
<td class="org-left">max(E, E)</td>
</tr>

<tr>
<td class="org-left">min(E, E, E, E&#x2026;)</td>
<td class="org-left">返回多个参数中最小的那个。如果有超过一个参数都最小，则返回第一个最小的参数。</td>
<td class="org-left">max(E, E, E, E&#x2026;)</td>
</tr>

<tr>
<td class="org-left">min(Iterable)</td>
<td class="org-left">返回迭代器中最小的元素。如果可迭代对象中没有元素，则抛出NoSuchElementException。</td>
<td class="org-left">max(Iterable), min(Iterator), max(Iterator)</td>
</tr>
</tbody>
</table>

        </div>    </div>
    <div id="postamble" class="status"><div id="archive" style="padding-top: 3em; padding-bottom: 2em;"><a href="/archive.html">其它文章</a></div><script src="/js/av-min-1.5.0.js"></script>    </div>
</body>
</html>
