<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://bruceasu.github.io/rss.xml"
      title="RSS feed for https://bruceasu.github.io/"/>
<title>Google_Guava官方教程（中文版）7-原生类型</title>
<meta name="author" content="Bruce">
<meta name="referrer" content="no-referrer">
<link href= "/styles/org-manual.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="static/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="/styles/font.css">
<link rel="stylesheet" media="screen and (min-width: 600px)" href="/styles/post.css">
<link rel="stylesheet" media="screen and (max-width: 600px)" href="/styles/post_mobile.css">
<link rel="stylesheet" media="screen and (min-width: 600px)" href="/styles/navigatebar.css">
<link rel="stylesheet" media="screen and (max-width: 600px)" href="/styles/navigatebar_mobile.css">
<link rel="stylesheet" href="/theme/highlight.css">

</head>
<body>
<div class="navigatebar">
    <div class="navigatebar-button navigatebar-mine">
        <a href="/index.html">Free World</a>
    </div>
    <div class="navigatebar-slogan">
        「生活可以更简单, 欢迎来到我的开源世界」
    </div>
    <div class="navigatebar-button">
        <a href="/index.html">Home</a>
    </div>
    <div class="navigatebar-button">
        <a href="/tags.html">Tags</a>
    </div>
    <div class="navigatebar-button">
        <a href="/rss.xml">Feeds</a>
    </div>
    <div class="navigatebar-button navigatebar-about">
        <a href="/about.html">About</a>
    </div>
</div>

      <div class="content-area">
<div class="title">Google_Guava官方教程（中文版）7-原生类型</div>
<div class="category-area"><a href="https://bruceasu.github.io/tags.html#reprint"><div class="category">reprint</div></a> </div>
<div class="char-counter">2010-10-01</div>
        <div id="content">
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb15b745">概述</a></li>
<li><a href="#org1e81f15">原生类型数组工具</a></li>
<li><a href="#org93085af">通用工具方法</a></li>
<li><a href="#org3875530">字节转换方法</a></li>
<li><a href="#org9ee1e70">无符号支持</a></li>
<li><a href="#orgc84dfb5">无符号通用工具方法</a></li>
<li><a href="#org0a32a68">无符号包装类</a></li>
</ul>
</div>
</nav>
<p>
原生类型
</p>

<div id="outline-container-orgb15b745" class="outline-2">
<h2 id="orgb15b745">概述</h2>
<div class="outline-text-2" id="text-orgb15b745">
<p>
Java的原生类型就是指基本类型：byte、short、int、long、float、double、char和boolean。
</p>

<p>
在从Guava查找原生类型方法之前，可以先查查Arrays类，或者对应的基础类型包装类，如
Integer。
</p>

<p>
原生类型不能当作对象或泛型的类型参数使用，这意味着许多通用方法都不能应用于它们。
Guava提供了若干通用工具，包括原生类型数组与集合API的交互，原生类型和字节数组的相
互转换，以及对某些原生类型的无符号形式的支持。
</p>


<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">原生类型</th>
<th scope="col" class="org-left">Guava工具类（都在com.google.common.primitives包）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">byte</td>
<td class="org-left">Bytes, SignedBytes, UnsignedBytes</td>
</tr>

<tr>
<td class="org-left">short</td>
<td class="org-left">Shorts</td>
</tr>

<tr>
<td class="org-left">int</td>
<td class="org-left">Ints, UnsignedInteger, UnsignedInts</td>
</tr>

<tr>
<td class="org-left">long</td>
<td class="org-left">Longs, UnsignedLong, UnsignedLongs</td>
</tr>

<tr>
<td class="org-left">float</td>
<td class="org-left">Floats</td>
</tr>

<tr>
<td class="org-left">double</td>
<td class="org-left">Doubles</td>
</tr>

<tr>
<td class="org-left">char</td>
<td class="org-left">Chars</td>
</tr>

<tr>
<td class="org-left">boolean</td>
<td class="org-left">Booleans</td>
</tr>
</tbody>
</table>

<p>
Bytes工具类没有定义任何区分有符号和无符号字节的方法，而是把它们都放到了
SignedBytes和UnsignedBytes工具类中，因为字节类型的符号性比起其它类型要略微含糊一
些。int和long的无符号形式方法在UnsignedInts和UnsignedLongs类中，但由于这两个类型
的大多数用法都是有符号的，Ints和Longs类按照有符号形式处理方法的输入参数。此外，
Guava为int和long的无符号形式提供了包装类，即UnsignedInteger和UnsignedLong，以帮
助你使用类型系统，以极小的性能消耗对有符号和无符号值进行强制转换。在本章下面描述
的方法签名中，我们用Wrapper表示JDK包装类，prim表示原生类型。（Prims表示相应的
Guava工具类。）
</p>
</div>
</div>

<div id="outline-container-org1e81f15" class="outline-2">
<h2 id="org1e81f15">原生类型数组工具</h2>
<div class="outline-text-2" id="text-org1e81f15">
<p>
原生类型数组是处理原生类型集合的最有效方式（从内存和性能双方面考虑）。Guava为此
提供了许多工具方法。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法签名</th>
<th scope="col" class="org-left">描述</th>
<th scope="col" class="org-left">类似方法</th>
<th scope="col" class="org-left">可用性</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">List&lt;Wrapper&gt; asList(prim… backingArray)</td>
<td class="org-left">把数组转为相应包装类的List</td>
<td class="org-left">Arrays.asList</td>
<td class="org-left">符号无关*</td>
</tr>

<tr>
<td class="org-left">prim[] toArray(Collection&lt;Wrapper&gt; collection)</td>
<td class="org-left">把集合拷贝为数组，和collection.toArray()一样线程安全</td>
<td class="org-left">Collection.toArray()</td>
<td class="org-left">符号无关</td>
</tr>

<tr>
<td class="org-left">prim[] concat(prim[]… arrays)</td>
<td class="org-left">串联多个原生类型数组</td>
<td class="org-left">Iterables.concat</td>
<td class="org-left">符号无关</td>
</tr>

<tr>
<td class="org-left">boolean contains(prim[] array, prim target)</td>
<td class="org-left">判断原生类型数组是否包含给定值</td>
<td class="org-left">Collection.contains</td>
<td class="org-left">符号无关</td>
</tr>

<tr>
<td class="org-left">int indexOf(prim[] array, prim target)</td>
<td class="org-left">给定值在数组中首次出现处的索引，若不包含此值返回-1</td>
<td class="org-left">List.indexOf</td>
<td class="org-left">符号无关</td>
</tr>

<tr>
<td class="org-left">int lastIndexOf(prim[] array, prim target)</td>
<td class="org-left">给定值在数组最后出现的索引，若不包含此值返回-1</td>
<td class="org-left">List.lastIndexOf</td>
<td class="org-left">符号无关</td>
</tr>

<tr>
<td class="org-left">prim min(prim… array)</td>
<td class="org-left">数组中最小的值</td>
<td class="org-left">Collections.min</td>
<td class="org-left">符号相关*</td>
</tr>

<tr>
<td class="org-left">prim max(prim… array)</td>
<td class="org-left">数组中最大的值</td>
<td class="org-left">Collections.max</td>
<td class="org-left">符号相关</td>
</tr>

<tr>
<td class="org-left">String join(String separator, prim… array)</td>
<td class="org-left">把数组用给定分隔符连接为字符串</td>
<td class="org-left">Joiner.on(separator).join</td>
<td class="org-left">符号相关</td>
</tr>

<tr>
<td class="org-left">Comparator&lt;prim[]&gt;   lexicographicalComparator()</td>
<td class="org-left">按字典序比较原生类型数组的Comparator</td>
<td class="org-left">Ordering.natural().lexicographical()</td>
<td class="org-left">符号相关</td>
</tr>
</tbody>
</table>

<p>
*符号无关方法存在于Bytes, Shorts, Ints, Longs, Floats, Doubles, Chars, Booleans。
而UnsignedInts, UnsignedLongs, SignedBytes, 或UnsignedBytes不存在。
</p>

<p>
*符号相关方法存在于SignedBytes, UnsignedBytes, Shorts, Ints, Longs, Floats,
Doubles, Chars, Booleans, UnsignedInts, UnsignedLongs。而Bytes不存在。
</p>
</div>
</div>

<div id="outline-container-org93085af" class="outline-2">
<h2 id="org93085af">通用工具方法</h2>
<div class="outline-text-2" id="text-org93085af">
<p>
Guava为原生类型提供了若干JDK6没有的工具方法。但请注意，其中某些方法已经存在于
JDK7中。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法签名</th>
<th scope="col" class="org-left">描述</th>
<th scope="col" class="org-left">可用性</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">int compare(prim a, prim b)</td>
<td class="org-left">传统的Comparator.compare方法，但针对原生类型。JDK7的原生类型包装类也提供这样的方法</td>
<td class="org-left">符号相关</td>
</tr>

<tr>
<td class="org-left">prim checkedCast(long value)</td>
<td class="org-left">把给定long值转为某一原生类型，若给定值不符合该原生类型，则抛出IllegalArgumentException</td>
<td class="org-left">仅适用于符号相关的整型*</td>
</tr>

<tr>
<td class="org-left">prim saturatedCast(long value)</td>
<td class="org-left">把给定long值转为某一原生类型，若给定值不符合则使用最接近的原生类型值</td>
<td class="org-left">仅适用于符号相关的整型</td>
</tr>
</tbody>
</table>

<p>
*这里的整型包括byte, short, int, long。不包括char, boolean, float, 或double。
</p>

<p>
**译者注：不符合主要是指long值超出prim类型的范围，比如过大的long超出int范围。
</p>

<p>
注：com.google.common.math.DoubleMath提供了舍入double的方法，支持多种舍入模式。相见第12章的”浮点数运算”。
</p>
</div>
</div>

<div id="outline-container-org3875530" class="outline-2">
<h2 id="org3875530">字节转换方法</h2>
<div class="outline-text-2" id="text-org3875530">
<p>
Guava提供了若干方法，用来把原生类型按大字节序与字节数组相互转换。所有这些方法都
是符号无关的，此外Booleans没有提供任何下面的方法。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法或字段签名</th>
<th scope="col" class="org-left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">int BYTES</td>
<td class="org-left">常量：表示该原生类型需要的字节数</td>
</tr>

<tr>
<td class="org-left">prim fromByteArray(byte[] bytes)</td>
<td class="org-left">使用字节数组的前Prims.BYTES个字节，按大字节序返回原生类型值；如果bytes.length &lt;= Prims.BYTES，抛出IAE</td>
</tr>

<tr>
<td class="org-left">prim fromBytes(byte b1, …, byte bk)</td>
<td class="org-left">接受Prims.BYTES个字节参数，按大字节序返回原生类型值</td>
</tr>

<tr>
<td class="org-left">byte[] toByteArray(prim value)</td>
<td class="org-left">按大字节序返回value的字节数组</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org9ee1e70" class="outline-2">
<h2 id="org9ee1e70">无符号支持</h2>
<div class="outline-text-2" id="text-org9ee1e70">
<p>
JDK原生类型包装类提供了针对有符号类型的方法，而UnsignedInts和UnsignedLongs工具类
提供了相应的无符号通用方法。UnsignedInts和UnsignedLongs直接处理原生类型：使用时，
由你自己保证只传入了无符号类型的值。
</p>

<p>
此外，对int和long，Guava提供了无符号包装类（UnsignedInteger和UnsignedLong），来
帮助你以极小的性能消耗，对有符号和无符号类型进行强制转换。
</p>
</div>
</div>

<div id="outline-container-orgc84dfb5" class="outline-2">
<h2 id="orgc84dfb5">无符号通用工具方法</h2>
<div class="outline-text-2" id="text-orgc84dfb5">
<p>
JDK的原生类型包装类提供了有符号形式的类似方法。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法签名</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">int UnsignedInts.parseUnsignedInt(String)</td>
<td class="org-left">按无符号十进制解析字符串</td>
</tr>

<tr>
<td class="org-left">long UnsignedLongs.parseUnsignedLong(String)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">int UnsignedInts.parseUnsignedInt(String string, int radix)</td>
<td class="org-left">按无符号的特定进制解析字符串</td>
</tr>

<tr>
<td class="org-left">long UnsignedLongs.parseUnsignedLong(String string, int radix)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">String UnsignedInts.toString(int)</td>
<td class="org-left">数字按无符号十进制转为字符串</td>
</tr>

<tr>
<td class="org-left">String UnsignedLongs.toString(long)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">String UnsignedInts.toString(int   value, int radix)</td>
<td class="org-left">数字按无符号特定进制转为字符串</td>
</tr>

<tr>
<td class="org-left">String UnsignedLongs.toString(long value, int radix)</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org0a32a68" class="outline-2">
<h2 id="org0a32a68">无符号包装类</h2>
<div class="outline-text-2" id="text-org0a32a68">
<p>
无符号包装类包含了若干方法，让使用和转换更容易。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">方法签名</th>
<th scope="col" class="org-left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">UnsignedPrim add(UnsignedPrim), subtract, multiply, divide, remainder</td>
<td class="org-left">简单算术运算</td>
</tr>

<tr>
<td class="org-left">UnsignedPrim valueOf(BigInteger)</td>
<td class="org-left">按给定BigInteger返回无符号对象，若BigInteger为负或不匹配，抛出IAE</td>
</tr>

<tr>
<td class="org-left">UnsignedPrim valueOf(long)</td>
<td class="org-left">按给定long返回无符号对象，若long为负或不匹配，抛出IAE</td>
</tr>

<tr>
<td class="org-left">UnsignedPrim asUnsigned(prim value)</td>
<td class="org-left">把给定的值当作无符号类型。例如，UnsignedInteger.asUnsigned(1&lt;&lt;31)的值为231,尽管1&lt;&lt;31当作int时是负的</td>
</tr>

<tr>
<td class="org-left">BigInteger bigIntegerValue()</td>
<td class="org-left">用BigInteger返回该无符号对象的值</td>
</tr>

<tr>
<td class="org-left">toString(),  toString(int radix)</td>
<td class="org-left">返回无符号值的字符串表示</td>
</tr>
</tbody>
</table>

<p>
译者注：UnsignedPrim指各种无符号包装类，如UnsignedInteger、UnsignedLong。
</p>
</div>
</div>

        </div>    </div>
    <div id="postamble" class="status"><div id="archive" style="padding-top: 3em; padding-bottom: 2em;"><a href="/archive.html">其它文章</a></div><script src="/js/av-min-1.5.0.js"></script>    </div>
</body>
</html>
